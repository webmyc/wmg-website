---
// Schedule component with gatherings list and JSON-LD structured data

const gatherings = [
  {
    date: "2024-10-28",
    time: "16:00",
    endTime: "17:30",
    title: "The Gift of Man in today's fast-changing world: being of service to the whole"
  },
  {
    date: "2024-11-25", 
    time: "16:00",
    endTime: "17:30",
    title: "The Siddhis of Manhood: our highest becoming"
  },
  {
    date: "2024-12-30",
    time: "16:00", 
    endTime: "17:30",
    title: "The Wholesome Man: integrating our shadows, gifts and siddhis in daily life"
  },
  {
    date: "2025-01-27",
    time: "16:00",
    endTime: "17:30", 
    title: "Bringing our highest vision into form: envisioning the year ahead"
  }
];

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "The Whole Men Gathering",
  "url": "https://wholemengathering.org",
  "event": gatherings.map(gathering => ({
    "@type": "Event",
    "name": gathering.title,
    "description": gathering.title,
    "startDate": `${gathering.date}T${gathering.time}:00+00:00`,
    "endDate": `${gathering.date}T${gathering.endTime}:00+00:00`,
    "eventStatus": "https://schema.org/EventScheduled",
    "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
    "location": {
      "@type": "VirtualLocation",
      "url": "https://wholemengathering.org"
    },
    "organizer": {
      "@type": "Organization", 
      "name": "The Whole Men Gathering"
    }
  }))
};
---

<section aria-labelledby="gatherings" class="relative py-20 px-6 bg-wmg-bg overflow-hidden">
  <!-- Organic background shading -->
  <div class="absolute inset-0 bg-gradient-to-tl from-wmg-bg via-wmg-bg/95 to-wmg-bg/90"></div>
  
  <!-- Animated gradient flares -->
  <div class="absolute top-1/3 right-0 w-72 h-72 bg-gradient-radial from-wmg-gold/6 via-wmg-gold/3 to-transparent rounded-full blur-3xl animate-float"></div>
  <div class="absolute bottom-1/4 left-0 w-64 h-64 bg-gradient-radial from-wmg-gold/8 via-wmg-gold/4 to-transparent rounded-full blur-3xl animate-float-delayed"></div>
  <div class="absolute top-1/2 left-1/3 w-48 h-48 bg-gradient-radial from-wmg-gold/4 via-wmg-gold/2 to-transparent rounded-full blur-2xl animate-float-slow"></div>
  
  <!-- Subtle noise texture -->
  <div class="absolute inset-0 opacity-[0.015] bg-noise-pattern"></div>
  
  <!-- Gradient mesh overlay -->
  <div class="absolute inset-0 bg-gradient-to-br from-transparent via-wmg-gold/[0.015] to-transparent"></div>
  
  <div class="relative max-w-4xl mx-auto">
    <h2 id="gatherings" class="text-3xl md:text-4xl lg:text-5xl font-bold text-wmg-text mb-6 text-center section-title">
      Gatherings
    </h2>
    
    <p class="text-xl md:text-2xl text-wmg-text/80 mb-12 text-center section-subtitle">
      Every last Tuesday of the month, 4:00â€“5:30 pm UTC
    </p>
    
    <ul class="space-y-8">
      {gatherings.map((gathering, index) => (
        <li class={`gathering-item gathering-${index + 1} border-l-4 border-wmg-gold pl-6 py-4`}>
          <time 
            datetime={`${gathering.date}T${gathering.time}:00+00:00`}
            class="block text-lg md:text-xl font-semibold text-wmg-gold mb-2"
          >
            {new Date(gathering.date).toLocaleDateString('en-US', { 
              month: 'long', 
              day: 'numeric',
              year: 'numeric'
            })}
          </time>
          <h3 class="text-xl md:text-2xl lg:text-3xl text-wmg-text leading-relaxed">
            {gathering.title}
          </h3>
        </li>
      ))}
    </ul>
  </div>
</section>

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)}></script>

<style>
  /* Organic floating animations */
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) translateX(0px) scale(1);
    }
    33% {
      transform: translateY(-20px) translateX(10px) scale(1.05);
    }
    66% {
      transform: translateY(10px) translateX(-5px) scale(0.95);
    }
  }
  
  @keyframes floatDelayed {
    0%, 100% {
      transform: translateY(0px) translateX(0px) scale(1);
    }
    33% {
      transform: translateY(15px) translateX(-10px) scale(0.95);
    }
    66% {
      transform: translateY(-10px) translateX(5px) scale(1.05);
    }
  }
  
  .animate-float {
    animation: float 8s ease-in-out infinite;
  }
  
  .animate-float-delayed {
    animation: floatDelayed 10s ease-in-out infinite 2s;
  }
  
  .animate-float-slow {
    animation: floatSlow 12s ease-in-out infinite;
  }
  
  /* Gradient radial utility */
  .bg-gradient-radial {
    background: radial-gradient(circle at center, var(--tw-gradient-stops));
  }
  
  /* Noise pattern background */
  .bg-noise-pattern {
    background-image: 
      radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0);
    background-size: 20px 20px;
  }
  
  @keyframes floatSlow {
    0%, 100% {
      transform: translateY(0px) translateX(0px) scale(1);
    }
    25% {
      transform: translateY(-15px) translateX(8px) scale(1.02);
    }
    50% {
      transform: translateY(-8px) translateX(-5px) scale(0.98);
    }
    75% {
      transform: translateY(12px) translateX(3px) scale(1.01);
    }
  }
  
  /* Section animations */
  .section-title {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
    animation: sectionTitleReveal 1s ease-out 0.2s forwards;
  }
  
  .section-subtitle {
    opacity: 0;
    transform: translateY(20px);
    animation: sectionSubtitleReveal 0.8s ease-out 0.4s forwards;
  }
  
  .gathering-item {
    opacity: 0;
    transform: translateX(-30px);
    transition: all 0.6s ease-out;
  }
  
  .gathering-1 {
    animation: gatheringReveal 0.8s ease-out 0.6s forwards;
  }
  
  .gathering-2 {
    animation: gatheringReveal 0.8s ease-out 0.8s forwards;
  }
  
  .gathering-3 {
    animation: gatheringReveal 0.8s ease-out 1s forwards;
  }
  
  .gathering-4 {
    animation: gatheringReveal 0.8s ease-out 1.2s forwards;
  }
  
  @keyframes sectionTitleReveal {
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  @keyframes sectionSubtitleReveal {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes gatheringReveal {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-float,
    .animate-float-delayed {
      animation: none;
    }
    
    .section-title,
    .section-subtitle,
    .gathering-item {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }
</style>
